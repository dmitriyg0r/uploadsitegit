# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Webhook

## ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞!

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç! –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å GitHub.

## üìã –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

1. ‚úÖ **Webhook endpoint**: `https://space-point.ru/webhook.php`
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π**: `/opt/uploadsite/auto-deploy.sh`
3. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: `/opt/uploadsite/deploy.log`
4. ‚úÖ **Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: webhook —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ HTTPS
5. ‚úÖ **PHP –æ–±—Ä–∞–±–æ—Ç–∫–∞**: webhook –ø–æ–ª—É—á–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç GitHub

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Webhook:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ: https://github.com/dmitriyg0r/uploadsitegit

### 2. –ó–∞–π–¥–∏—Ç–µ –≤ Settings > Webhooks
- –ù–∞–∂–º–∏—Ç–µ **Settings** (–≤–∫–ª–∞–¥–∫–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
- –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Webhooks**
- –ù–∞–∂–º–∏—Ç–µ **Add webhook**

### 3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook:

**Payload URL:**
```
https://space-point.ru/webhook.php
```

**Content type:**
```
application/json
```

**Secret:** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
```
747302deb38597662304256819c7c02dc04730bc424bff54afb38b2924c00d43
```

**Events:** 
- –í—ã–±–µ—Ä–∏—Ç–µ "Just the push event"
- –ò–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ "Let me select individual events" –∏ –æ—Ç–º–µ—Ç—å—Ç–µ —Ç–æ–ª—å–∫–æ "Pushes"

**Active:** ‚úÖ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–æ)

### 4. –ù–∞–∂–º–∏—Ç–µ "Add webhook"

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–í—ã –¥–µ–ª–∞–µ—Ç–µ –∫–æ–º–º–∏—Ç** –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
2. **–î–µ–ª–∞–µ—Ç–µ push** –≤ GitHub
3. **GitHub –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook** –Ω–∞ `https://space-point.ru/webhook.php`
4. **–°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
5. **–°–∞–π—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 3-5 –º–∏–Ω—É—Ç

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–µ–ø–ª–æ—è:

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ª–æ–≥–æ–≤
tail -f /opt/uploadsite/deploy.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 20 –∑–∞–ø–∏—Å–µ–π
tail -20 /opt/uploadsite/deploy.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
cd /opt/uploadsite
docker-compose ps
```

### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```bash
cd /opt/uploadsite
./auto-deploy.sh
```

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook –≤ GitHub, —Å–¥–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–∏—Ç:

```bash
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
echo "test" > test.txt
git add test.txt
git commit -m "–¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è"
git push origin main
```

–ß–µ—Ä–µ–∑ 3-5 –º–∏–Ω—É—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç–µ!

## üìû Endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- **Webhook**: `https://space-point.ru/webhook.php` (–¥–ª—è GitHub)
- **–õ–æ–≥–∏ –¥–µ–ø–ª–æ—è**: `/opt/uploadsite/deploy.log`
- **–°–∞–π—Ç**: `https://space-point.ru`

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –ª—é–±–æ–π push –≤ main –≤–µ—Ç–∫—É –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä! 