# Изменения в системе ввода авторов

## Обзор изменений

Реализована новая система ввода авторов работы с возможностью добавления до 4 авторов и фиксированным полем группы.

## Основные изменения

### Frontend (UploadPage.jsx)

1. **Новая структура состояния:**
   - Заменили поля `fullName` и `secondAuthor` на массив `authors: ['']`
   - Поле `group` теперь всегда содержит `'18ПрД4310'` и недоступно для редактирования

2. **Динамический ввод авторов:**
   - Кнопка "Добавить автора" (до 4 авторов максимум)
   - Кнопки удаления автора для каждого поля (кроме случая, когда остался только один автор)
   - Подсказка о возможности добавления до 4 авторов

3. **Валидация:**
   - Проверка наличия хотя бы одного заполненного автора
   - Отфильтровка пустых полей при отправке

4. **Обратная совместимость:**
   - При отправке данные дублируются в старом формате для совместимости с backend

### Backend (server.js)

1. **Новая логика обработки авторов:**
   - Поддержка нового формата с полями `author_0`, `author_1`, etc.
   - Обратная совместимость со старым форматом `fullName` и `secondAuthor`
   - Автоматическое определение формата данных

2. **Улучшенная структура данных:**
   - Сохранение массива всех авторов в поле `authors`
   - Основной автор (первый в списке) используется для создания папки
   - Совместимость с существующими данными

### CSS (App.css)

1. **Новые стили для интерфейса авторов:**
   - `.authors-container` - контейнер для списка авторов
   - `.author-input-row` - строка с полем ввода и кнопкой удаления
   - `.author-input` - стиль для полей ввода авторов
   - `.add-author-btn` - кнопка добавления автора
   - `.remove-author-btn` - кнопка удаления автора
   - `.authors-hint` - подсказка пользователю
   - `.group-input-readonly` - стиль для нередактируемого поля группы

## Функциональность

### Пользовательский интерфейс

1. **Добавление авторов:** Пользователь может добавить до 4 авторов с помощью кнопки "Добавить автора"
2. **Удаление авторов:** Каждый автор (кроме последнего) может быть удален кнопкой ✕
3. **Фиксированная группа:** Поле группы всегда показывает "18ПрД4310" и недоступно для редактирования
4. **Валидация:** Нельзя отправить форму без указания хотя бы одного автора

### Отображение данных

1. **Главная страница:** Корректно отображает всех авторов работы
2. **Админ панель:** Показывает всех авторов и количество участников совместной работы
3. **Обратная совместимость:** Старые записи с двумя авторами отображаются корректно

## Техническая реализация

### Передача данных

```javascript
// Новый формат
const cleanAuthors = filledAuthors.map(author => author.trim());
uploadData.append('fullName', cleanAuthors[0]); // Для совместимости
if (cleanAuthors.length > 1) {
  uploadData.append('secondAuthor', cleanAuthors.slice(1).join(', ')); // Для совместимости
}

// Новые поля
cleanAuthors.forEach((author, index) => {
  uploadData.append(`author_${index}`, author);
});
uploadData.append('authorsCount', cleanAuthors.length.toString());
```

### Серверная обработка

```javascript
// Определение формата данных
if (authorsCount && parseInt(authorsCount) > 0) {
  // Новый формат - собираем из author_0, author_1, etc.
  for (let i = 0; i < count; i++) {
    const authorField = req.body[`author_${i}`];
    if (authorField && authorField.trim()) {
      authors.push(authorField.trim());
    }
  }
} else {
  // Старый формат - для обратной совместимости
  // ...
}
```

## Тестирование

Для тестирования изменений:

1. Запустите приложение: `npm start`
2. Перейдите на страницу загрузки `/upload`
3. Проверьте возможность добавления/удаления авторов
4. Убедитесь, что поле группы недоступно для редактирования
5. Загрузите тестовую работу с несколькими авторами
6. Проверьте корректность отображения на главной странице

## Обратная совместимость

Все изменения полностью совместимы с существующими данными:
- Старые записи продолжают корректно отображаться
- Новые записи сохраняют дублированную информацию в старом формате
- Серверная логика автоматически определяет формат входящих данных

## Обновление от [дата]: Название работы и улучшенная анимация

### Новые возможности

1. **Поле "Название работы":**
   - Обязательное поле для указания названия проекта
   - Отображается в заголовке карточки работы вместо авторов
   - Валидация на клиенте и сервере

2. **Улучшенная анимация загрузки:**
   - Детальный прогресс загрузки с описанием этапов
   - Анимированный прогресс-бар
   - Улучшенная кнопка отправки с анимацией

3. **Новое отображение данных:**
   - В карточках работ теперь показывается название работы
   - Авторы отображаются в секции деталей
   - Улучшенная адаптивность для мобильных устройств

### Технические изменения

**Frontend:**
- Добавлено поле `title` в состояние формы
- Реализована детальная анимация загрузки с `onUploadProgress`
- Улучшены CSS стили для прогресс-бара и анимаций
- Обновлена логика отображения в `HomePage` и `DeployLogsPage`

**Backend:**
- Добавлена обработка поля `title` в API загрузки
- Расширена валидация для проверки названия работы
- Обновлена структура данных `uploadInfo`

**Пользовательский опыт:**
- Более информативный процесс загрузки
- Четкое отображение названий работ
- Улучшенная читаемость информации об авторах

### Обратная совместимость

Для работ без указанного названия используется fallback: `"Работа от {имя_автора}"` 